/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orchestrator/route";
exports.ids = ["app/api/orchestrator/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/@supabase/realtime-js/dist/main sync recursive":
/*!************************************************************!*\
  !*** ./node_modules/@supabase/realtime-js/dist/main/ sync ***!
  \************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/@supabase/realtime-js/dist/main sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forchestrator%2Froute&page=%2Fapi%2Forchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forchestrator%2Froute.ts&appDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forchestrator%2Froute&page=%2Fapi%2Forchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forchestrator%2Froute.ts&appDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_willi_dev_Artifyagent_app_api_orchestrator_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/orchestrator/route.ts */ \"(rsc)/./app/api/orchestrator/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orchestrator/route\",\n        pathname: \"/api/orchestrator\",\n        filename: \"route\",\n        bundlePath: \"app/api/orchestrator/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\willi\\\\dev\\\\Artifyagent\\\\app\\\\api\\\\orchestrator\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_willi_dev_Artifyagent_app_api_orchestrator_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/orchestrator/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmNoZXN0cmF0b3IlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yY2hlc3RyYXRvciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yY2hlc3RyYXRvciUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN3aWxsaSU1Q2RldiU1Q0FydGlmeWFnZW50JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUN3aWxsaSU1Q2RldiU1Q0FydGlmeWFnZW50JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNrQztBQUNqRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNpSjs7QUFFakoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcnRpZnktYWdlbnQvPzlmZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcd2lsbGlcXFxcZGV2XFxcXEFydGlmeWFnZW50XFxcXGFwcFxcXFxhcGlcXFxcb3JjaGVzdHJhdG9yXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9vcmNoZXN0cmF0b3Ivcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vcmNoZXN0cmF0b3JcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL29yY2hlc3RyYXRvci9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXHdpbGxpXFxcXGRldlxcXFxBcnRpZnlhZ2VudFxcXFxhcHBcXFxcYXBpXFxcXG9yY2hlc3RyYXRvclxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9vcmNoZXN0cmF0b3Ivcm91dGVcIjtcbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forchestrator%2Froute&page=%2Fapi%2Forchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forchestrator%2Froute.ts&appDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/orchestrator/route.ts":
/*!***************************************!*\
  !*** ./app/api/orchestrator/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n\n\n\n// Demo mode configuration\nconst DEMO_VARIANTS = [\n    {\n        templateVariantId: \"a4_premium_noframe\",\n        material: \"premium_paper\",\n        size: \"A4\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"50x70_premium_noframe\",\n        material: \"premium_paper\",\n        size: \"50x70cm\",\n        frame: \"none\"\n    }\n];\n// Production variants using real template IDs from your Gelato account\nconst PRODUCTION_VARIANTS = [\n    // Primary template: c1b88548-76fc-49ca-9dfc-a8be855b25f1 (Poster/Wall Art)\n    // Different sizes and materials\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"A4\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"A3\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"30x40cm\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"50x70cm\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"70x100cm\",\n        frame: \"none\"\n    },\n    // With black frames\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"A4\",\n        frame: \"black\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"A3\",\n        frame: \"black\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"30x40cm\",\n        frame: \"black\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"50x70cm\",\n        frame: \"black\"\n    },\n    // With white frames\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"A4\",\n        frame: \"white\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"A3\",\n        frame: \"white\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"30x40cm\",\n        frame: \"white\"\n    },\n    // Canvas variants (no frames)\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"canvas\",\n        size: \"A4\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"canvas\",\n        size: \"A3\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"canvas\",\n        size: \"30x40cm\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"canvas\",\n        size: \"50x70cm\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"canvas\",\n        size: \"70x100cm\",\n        frame: \"none\"\n    },\n    // Square formats\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"30x30cm\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"30x30cm\",\n        frame: \"black\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"premium_paper\",\n        size: \"50x50cm\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"canvas\",\n        size: \"30x30cm\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"canvas\",\n        size: \"50x50cm\",\n        frame: \"none\"\n    },\n    // Standard paper options\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"standard_paper\",\n        size: \"A4\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"standard_paper\",\n        size: \"A3\",\n        frame: \"none\"\n    },\n    {\n        templateVariantId: \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\",\n        material: \"standard_paper\",\n        size: \"30x40cm\",\n        frame: \"none\"\n    },\n    // Alternative template: a955b726-536f-422a-844b-b54e63f7c436 (if different product type)\n    {\n        templateVariantId: \"a955b726-536f-422a-844b-b54e63f7c436\",\n        material: \"premium_paper\",\n        size: \"A4\",\n        frame: \"none\"\n    }\n];\n// Use the first real template as the main template\nconst GELATO_TEMPLATE_ID = \"c1b88548-76fc-49ca-9dfc-a8be855b25f1\";\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        // Get environment variables\n        const supabaseUrl = \"https://kgguofkiponiuhnjcdxx.supabase.co\";\n        const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n        const anthropicApiKey = process.env.ANTHROPIC_API_KEY;\n        const gelatoApiKey = process.env.GELATO_API_KEY;\n        if (!supabaseUrl || !supabaseServiceKey) {\n            throw new Error(\"Missing Supabase configuration\");\n        }\n        if (!body.file?.publicUrl) {\n            throw new Error(\"File URL is required\");\n        }\n        // Initialize clients\n        const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey);\n        const anthropic = anthropicApiKey ? new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            apiKey: anthropicApiKey\n        }) : null;\n        // Create log function\n        const log = async (level, message, context, productId)=>{\n            try {\n                await supabase.from(\"log\").insert({\n                    level,\n                    message,\n                    context,\n                    product_id: productId\n                });\n            } catch (logError) {\n                console.error(\"Failed to log:\", logError);\n            }\n            console.log(`[${level}] ${message}`, context);\n        };\n        await log(\"INFO\", \"Starting product creation workflow\", {\n            fileUrl: body.file.publicUrl,\n            demoMode: body.demoMode\n        });\n        // Step 1: Store image upload record\n        const { data: imageUpload, error: uploadError } = await supabase.from(\"image_upload\").insert({\n            url: body.file.publicUrl,\n            filename: body.file.filename,\n            content_type: body.file.contentType,\n            size_bytes: body.file.sizeBytes,\n            user_id: body.userId\n        }).select().single();\n        if (uploadError) {\n            await log(\"ERROR\", \"Failed to store image upload\", uploadError);\n            throw uploadError;\n        }\n        await log(\"INFO\", \"Image upload stored\", {\n            uploadId: imageUpload.id\n        });\n        // Step 2: Create product record\n        const { data: product, error: productError } = await supabase.from(\"product\").insert({\n            status: \"PROCESSING\",\n            image_upload_id: imageUpload.id,\n            user_id: body.userId\n        }).select().single();\n        if (productError) {\n            await log(\"ERROR\", \"Failed to create product record\", productError);\n            throw productError;\n        }\n        await log(\"INFO\", \"Product record created\", {\n            productId: product.id\n        });\n        // Step 3: Generate AI-powered metadata (optional if Anthropic is configured)\n        let metadata = {\n            title: \"Custom Art Print\",\n            description: \"High-quality poster print perfect for home or office decoration. Premium paper with vibrant colors.\"\n        };\n        if (anthropic) {\n            try {\n                metadata = await generateProductMetadata(anthropic, body.file.publicUrl);\n                await log(\"INFO\", \"Generated AI metadata\", metadata, product.id);\n            } catch (metadataError) {\n                await log(\"WARN\", \"Failed to generate AI metadata, using fallback\", metadataError, product.id);\n            }\n        } else {\n            await log(\"INFO\", \"Using fallback metadata (Anthropic not configured)\", {}, product.id);\n        }\n        // Step 4: Determine which variants to create\n        const isActuallyDemoMode = body.demoMode === true || process.env.DEMO_MODE === \"true\";\n        const variants = isActuallyDemoMode ? DEMO_VARIANTS : PRODUCTION_VARIANTS;\n        await log(\"INFO\", `Running in ${isActuallyDemoMode ? \"DEMO\" : \"PRODUCTION\"} mode`, {\n            requestDemoMode: body.demoMode,\n            envDemoMode: process.env.DEMO_MODE,\n            variantCount: variants.length\n        }, product.id);\n        // Step 5: Create product variants in database\n        const { error: variantError } = await supabase.from(\"variant\").insert(variants.map((v)=>({\n                product_id: product.id,\n                template_variant_id: v.templateVariantId,\n                material: v.material,\n                size: v.size,\n                frame: v.frame,\n                status: \"PROCESSING\"\n            })));\n        if (variantError) {\n            await log(\"ERROR\", \"Failed to create variant records\", variantError, product.id);\n            throw variantError;\n        }\n        await log(\"INFO\", `Created ${variants.length} variant records`, {\n            count: variants.length\n        }, product.id);\n        // Step 6: Create product in Gelato (if API key is configured and not in demo mode)\n        let gelatoProduct = null;\n        const hasValidGelatoConfig = gelatoApiKey && process.env.GELATO_STORE_ID && process.env.GELATO_STORE_ID !== \"123e4567-e89b-12d3-a456-426614174000\";\n        if (hasValidGelatoConfig && !isActuallyDemoMode) {\n            try {\n                gelatoProduct = await createGelatoProduct(body.file.publicUrl, variants, metadata);\n                await log(\"INFO\", \"Gelato product created\", {\n                    gelatoId: gelatoProduct.id\n                }, product.id);\n            } catch (gelatoError) {\n                await log(\"ERROR\", \"Gelato product creation failed\", gelatoError, product.id);\n                // Don't throw - continue without Gelato integration\n                await log(\"WARN\", \"Continuing without Gelato integration due to API error\", {}, product.id);\n            }\n        } else {\n            const reasons = [];\n            if (!gelatoApiKey) reasons.push(\"API key not configured\");\n            if (!process.env.GELATO_STORE_ID || process.env.GELATO_STORE_ID === \"123e4567-e89b-12d3-a456-426614174000\") reasons.push(\"store ID not configured\");\n            if (isActuallyDemoMode) reasons.push(\"demo mode enabled\");\n            await log(\"INFO\", `Skipping Gelato integration (${reasons.join(\", \")})`, {\n                isDemo: isActuallyDemoMode,\n                hasApiKey: !!gelatoApiKey,\n                hasValidStoreId: !!(process.env.GELATO_STORE_ID && process.env.GELATO_STORE_ID !== \"123e4567-e89b-12d3-a456-426614174000\")\n            }, product.id);\n        }\n        // Step 7: Update product with metadata and Gelato ID\n        const updateData = {\n            title: metadata.title,\n            description: metadata.description,\n            status: gelatoProduct ? \"PROCESSING\" : \"READY\"\n        };\n        if (gelatoProduct) {\n            updateData.gelato_id = gelatoProduct.id;\n        }\n        const { error: updateError } = await supabase.from(\"product\").update(updateData).eq(\"id\", product.id);\n        if (updateError) {\n            await log(\"ERROR\", \"Failed to update product\", updateError, product.id);\n            throw updateError;\n        }\n        // Update variants to READY if no Gelato integration\n        if (!gelatoProduct) {\n            await supabase.from(\"variant\").update({\n                status: \"READY\"\n            }).eq(\"product_id\", product.id);\n        }\n        await log(\"INFO\", \"Product creation completed\", {\n            productId: product.id,\n            hasGelato: !!gelatoProduct,\n            mode: isActuallyDemoMode ? \"DEMO\" : \"PRODUCTION\"\n        }, product.id);\n        // Return response with correct messaging\n        const responseMessage = gelatoProduct ? \"Product creation started with Gelato integration. Check status for updates.\" : isActuallyDemoMode ? \"Product created successfully in demo mode.\" : \"Product created successfully without Gelato integration.\";\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            productId: product.id,\n            gelatoId: gelatoProduct?.id,\n            status: gelatoProduct ? \"PROCESSING\" : \"READY\",\n            mode: isActuallyDemoMode ? \"DEMO\" : \"PRODUCTION\",\n            message: responseMessage,\n            metadata\n        });\n    } catch (error) {\n        console.error(\"Orchestrator API error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// AI metadata generation\nasync function generateProductMetadata(anthropic, imageUrl) {\n    const response = await anthropic.messages.create({\n        model: \"claude-3-haiku-20240307\",\n        max_tokens: 1000,\n        temperature: 0,\n        messages: [\n            {\n                role: \"user\",\n                content: `Generate product metadata for a poster/art print based on this image: ${imageUrl}\r\n\r\nReturn a JSON object with:\r\n- title: Compelling product title (max 60 chars)\r\n- description: SEO-optimized description (max 300 chars)\r\n\r\nFocus on artistic style, colors, mood, and potential use cases. Make it commercially appealing.`\n            }\n        ],\n        tools: [\n            {\n                name: \"generate_metadata\",\n                description: \"Generate product metadata for artwork\",\n                input_schema: {\n                    type: \"object\",\n                    properties: {\n                        title: {\n                            type: \"string\",\n                            maxLength: 60\n                        },\n                        description: {\n                            type: \"string\",\n                            maxLength: 300\n                        }\n                    },\n                    required: [\n                        \"title\",\n                        \"description\"\n                    ]\n                }\n            }\n        ]\n    });\n    const toolUse = response.content.find((c)=>c.type === \"tool_use\");\n    if (toolUse && toolUse.type === \"tool_use\") {\n        const input = toolUse.input;\n        console.log(\"AI generated metadata:\", input);\n        const result = {\n            title: input.title,\n            description: input.description\n        };\n        console.log(\"Final metadata:\", result);\n        return result;\n    }\n    // Fallback metadata without tags\n    const fallback = {\n        title: \"Custom Art Print\",\n        description: \"High-quality poster print perfect for home or office decoration. Premium paper with vibrant colors.\"\n    };\n    console.log(\"Using fallback metadata:\", fallback);\n    return fallback;\n}\n// Gelato API integration\nasync function createGelatoProduct(imageUrl, variants, metadata) {\n    const gelatoApiKey = process.env.GELATO_API_KEY;\n    const storeId = process.env.GELATO_STORE_ID || \"123e4567-e89b-12d3-a456-426614174000\";\n    if (!gelatoApiKey) {\n        throw new Error(\"Gelato API key not configured\");\n    }\n    const payload = {\n        templateId: GELATO_TEMPLATE_ID,\n        title: metadata.title,\n        description: metadata.description,\n        imagePlaceholders: [\n            {\n                name: \"ImageFront\",\n                fileUrl: imageUrl\n            }\n        ],\n        variants: variants.map((v)=>({\n                templateVariantId: v.templateVariantId\n            }))\n    };\n    console.log(\"Gelato API Request:\", JSON.stringify(payload, null, 2));\n    const response = await fetch(`https://ecommerce.gelatoapis.com/v1/stores/${storeId}/products:create-from-template`, {\n        method: \"POST\",\n        headers: {\n            \"X-API-KEY\": gelatoApiKey,\n            \"Content-Type\": \"application/json\",\n            \"Idempotency-Key\": crypto.randomUUID()\n        },\n        body: JSON.stringify(payload)\n    });\n    if (!response.ok) {\n        const errorText = await response.text();\n        console.error(\"Gelato API Error Response:\", errorText);\n        throw new Error(`Gelato API error: ${response.status} ${errorText}`);\n    }\n    const result = await response.json();\n    console.log(\"Gelato API Success Response:\", JSON.stringify(result, null, 2));\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0F4SCxNQUFNa0gsS0FBS0MsU0FBUyxDQUFDSjtJQUN2QjtJQUVBLElBQUksQ0FBQ3RCLFNBQVNnQyxFQUFFLEVBQUU7UUFDaEIsTUFBTUMsWUFBWSxNQUFNakMsU0FBU2tDLElBQUk7UUFDckNoRyxRQUFRQyxLQUFLLENBQUMsOEJBQThCOEY7UUFDNUMsTUFBTSxJQUFJOUcsTUFBTSxDQUFDLGtCQUFrQixFQUFFNkUsU0FBU3pDLE1BQU0sQ0FBQyxDQUFDLEVBQUUwRSxVQUFVLENBQUM7SUFDckU7SUFFQSxNQUFNZCxTQUFTLE1BQU1uQixTQUFTeEYsSUFBSTtJQUNsQzBCLFFBQVFULEdBQUcsQ0FBQyxnQ0FBZ0NnRyxLQUFLQyxTQUFTLENBQUNQLFFBQVEsTUFBTTtJQUN6RSxPQUFPQTtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJ0aWZ5LWFnZW50Ly4vYXBwL2FwaS9vcmNoZXN0cmF0b3Ivcm91dGUudHM/MjNjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcclxuaW1wb3J0IEFudGhyb3BpYyBmcm9tICdAYW50aHJvcGljLWFpL3NkaydcclxuXHJcbi8vIFR5cGVzXHJcbmludGVyZmFjZSBGaWxlVXBsb2FkIHtcclxuICBwdWJsaWNVcmw6IHN0cmluZ1xyXG4gIGZpbGVuYW1lPzogc3RyaW5nXHJcbiAgY29udGVudFR5cGU/OiBzdHJpbmdcclxuICBzaXplQnl0ZXM/OiBudW1iZXJcclxufVxyXG5cclxuaW50ZXJmYWNlIEdlbGF0b1ZhcmlhbnQge1xyXG4gIHRlbXBsYXRlVmFyaWFudElkOiBzdHJpbmdcclxuICBtYXRlcmlhbDogc3RyaW5nXHJcbiAgc2l6ZTogc3RyaW5nXHJcbiAgZnJhbWU6IHN0cmluZ1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUHJvZHVjdENyZWF0aW9uUmVxdWVzdCB7XHJcbiAgZmlsZTogRmlsZVVwbG9hZFxyXG4gIHVzZXJJZD86IHN0cmluZ1xyXG4gIGRlbW9Nb2RlPzogYm9vbGVhblxyXG59XHJcblxyXG4vLyBEZW1vIG1vZGUgY29uZmlndXJhdGlvblxyXG5jb25zdCBERU1PX1ZBUklBTlRTOiBHZWxhdG9WYXJpYW50W10gPSBbXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYTRfcHJlbWl1bV9ub2ZyYW1lXCIsXHJcbiAgICBtYXRlcmlhbDogXCJwcmVtaXVtX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIkE0XCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcIjUweDcwX3ByZW1pdW1fbm9mcmFtZVwiLCBcclxuICAgIG1hdGVyaWFsOiBcInByZW1pdW1fcGFwZXJcIixcclxuICAgIHNpemU6IFwiNTB4NzBjbVwiLFxyXG4gICAgZnJhbWU6IFwibm9uZVwiXHJcbiAgfVxyXG5dXHJcblxyXG4vLyBQcm9kdWN0aW9uIHZhcmlhbnRzIHVzaW5nIHJlYWwgdGVtcGxhdGUgSURzIGZyb20geW91ciBHZWxhdG8gYWNjb3VudFxyXG5jb25zdCBQUk9EVUNUSU9OX1ZBUklBTlRTOiBHZWxhdG9WYXJpYW50W10gPSBbXHJcbiAgLy8gUHJpbWFyeSB0ZW1wbGF0ZTogYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxIChQb3N0ZXIvV2FsbCBBcnQpXHJcbiAgLy8gRGlmZmVyZW50IHNpemVzIGFuZCBtYXRlcmlhbHNcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcInByZW1pdW1fcGFwZXJcIixcclxuICAgIHNpemU6IFwiQTRcIixcclxuICAgIGZyYW1lOiBcIm5vbmVcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJwcmVtaXVtX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIkEzXCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiLFxyXG4gICAgbWF0ZXJpYWw6IFwicHJlbWl1bV9wYXBlclwiLFxyXG4gICAgc2l6ZTogXCIzMHg0MGNtXCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiLFxyXG4gICAgbWF0ZXJpYWw6IFwicHJlbWl1bV9wYXBlclwiLFxyXG4gICAgc2l6ZTogXCI1MHg3MGNtXCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiLFxyXG4gICAgbWF0ZXJpYWw6IFwicHJlbWl1bV9wYXBlclwiLFxyXG4gICAgc2l6ZTogXCI3MHgxMDBjbVwiLFxyXG4gICAgZnJhbWU6IFwibm9uZVwiXHJcbiAgfSxcclxuICBcclxuICAvLyBXaXRoIGJsYWNrIGZyYW1lc1xyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiLFxyXG4gICAgbWF0ZXJpYWw6IFwicHJlbWl1bV9wYXBlclwiLFxyXG4gICAgc2l6ZTogXCJBNFwiLFxyXG4gICAgZnJhbWU6IFwiYmxhY2tcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJwcmVtaXVtX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIkEzXCIsXHJcbiAgICBmcmFtZTogXCJibGFja1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcInByZW1pdW1fcGFwZXJcIixcclxuICAgIHNpemU6IFwiMzB4NDBjbVwiLFxyXG4gICAgZnJhbWU6IFwiYmxhY2tcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJwcmVtaXVtX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIjUweDcwY21cIixcclxuICAgIGZyYW1lOiBcImJsYWNrXCJcclxuICB9LFxyXG4gIFxyXG4gIC8vIFdpdGggd2hpdGUgZnJhbWVzXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJwcmVtaXVtX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIkE0XCIsXHJcbiAgICBmcmFtZTogXCJ3aGl0ZVwiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcInByZW1pdW1fcGFwZXJcIixcclxuICAgIHNpemU6IFwiQTNcIixcclxuICAgIGZyYW1lOiBcIndoaXRlXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiLFxyXG4gICAgbWF0ZXJpYWw6IFwicHJlbWl1bV9wYXBlclwiLFxyXG4gICAgc2l6ZTogXCIzMHg0MGNtXCIsXHJcbiAgICBmcmFtZTogXCJ3aGl0ZVwiXHJcbiAgfSxcclxuICBcclxuICAvLyBDYW52YXMgdmFyaWFudHMgKG5vIGZyYW1lcylcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcImNhbnZhc1wiLFxyXG4gICAgc2l6ZTogXCJBNFwiLFxyXG4gICAgZnJhbWU6IFwibm9uZVwiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcImNhbnZhc1wiLFxyXG4gICAgc2l6ZTogXCJBM1wiLFxyXG4gICAgZnJhbWU6IFwibm9uZVwiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcImNhbnZhc1wiLFxyXG4gICAgc2l6ZTogXCIzMHg0MGNtXCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiLFxyXG4gICAgbWF0ZXJpYWw6IFwiY2FudmFzXCIsXHJcbiAgICBzaXplOiBcIjUweDcwY21cIixcclxuICAgIGZyYW1lOiBcIm5vbmVcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJjYW52YXNcIixcclxuICAgIHNpemU6IFwiNzB4MTAwY21cIixcclxuICAgIGZyYW1lOiBcIm5vbmVcIlxyXG4gIH0sXHJcbiAgXHJcbiAgLy8gU3F1YXJlIGZvcm1hdHNcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcInByZW1pdW1fcGFwZXJcIixcclxuICAgIHNpemU6IFwiMzB4MzBjbVwiLFxyXG4gICAgZnJhbWU6IFwibm9uZVwiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcInByZW1pdW1fcGFwZXJcIixcclxuICAgIHNpemU6IFwiMzB4MzBjbVwiLFxyXG4gICAgZnJhbWU6IFwiYmxhY2tcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJwcmVtaXVtX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIjUweDUwY21cIixcclxuICAgIGZyYW1lOiBcIm5vbmVcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJjYW52YXNcIixcclxuICAgIHNpemU6IFwiMzB4MzBjbVwiLFxyXG4gICAgZnJhbWU6IFwibm9uZVwiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcImNhbnZhc1wiLFxyXG4gICAgc2l6ZTogXCI1MHg1MGNtXCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIFxyXG4gIC8vIFN0YW5kYXJkIHBhcGVyIG9wdGlvbnNcclxuICB7XHJcbiAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogXCJjMWI4ODU0OC03NmZjLTQ5Y2EtOWRmYy1hOGJlODU1YjI1ZjFcIixcclxuICAgIG1hdGVyaWFsOiBcInN0YW5kYXJkX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIkE0XCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRlbXBsYXRlVmFyaWFudElkOiBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiLFxyXG4gICAgbWF0ZXJpYWw6IFwic3RhbmRhcmRfcGFwZXJcIixcclxuICAgIHNpemU6IFwiQTNcIixcclxuICAgIGZyYW1lOiBcIm5vbmVcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYzFiODg1NDgtNzZmYy00OWNhLTlkZmMtYThiZTg1NWIyNWYxXCIsXHJcbiAgICBtYXRlcmlhbDogXCJzdGFuZGFyZF9wYXBlclwiLFxyXG4gICAgc2l6ZTogXCIzMHg0MGNtXCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9LFxyXG4gIFxyXG4gIC8vIEFsdGVybmF0aXZlIHRlbXBsYXRlOiBhOTU1YjcyNi01MzZmLTQyMmEtODQ0Yi1iNTRlNjNmN2M0MzYgKGlmIGRpZmZlcmVudCBwcm9kdWN0IHR5cGUpXHJcbiAge1xyXG4gICAgdGVtcGxhdGVWYXJpYW50SWQ6IFwiYTk1NWI3MjYtNTM2Zi00MjJhLTg0NGItYjU0ZTYzZjdjNDM2XCIsXHJcbiAgICBtYXRlcmlhbDogXCJwcmVtaXVtX3BhcGVyXCIsXHJcbiAgICBzaXplOiBcIkE0XCIsXHJcbiAgICBmcmFtZTogXCJub25lXCJcclxuICB9XHJcbl1cclxuXHJcbi8vIFVzZSB0aGUgZmlyc3QgcmVhbCB0ZW1wbGF0ZSBhcyB0aGUgbWFpbiB0ZW1wbGF0ZVxyXG5jb25zdCBHRUxBVE9fVEVNUExBVEVfSUQgPSBcImMxYjg4NTQ4LTc2ZmMtNDljYS05ZGZjLWE4YmU4NTViMjVmMVwiXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5OiBQcm9kdWN0Q3JlYXRpb25SZXF1ZXN0ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcclxuICAgIFxyXG4gICAgLy8gR2V0IGVudmlyb25tZW50IHZhcmlhYmxlc1xyXG4gICAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkxcclxuICAgIGNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVlcclxuICAgIGNvbnN0IGFudGhyb3BpY0FwaUtleSA9IHByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZXHJcbiAgICBjb25zdCBnZWxhdG9BcGlLZXkgPSBwcm9jZXNzLmVudi5HRUxBVE9fQVBJX0tFWVxyXG4gICAgXHJcbiAgICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZVNlcnZpY2VLZXkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGNvbmZpZ3VyYXRpb24nKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghYm9keS5maWxlPy5wdWJsaWNVcmwpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIFVSTCBpcyByZXF1aXJlZCcpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSBjbGllbnRzXHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlS2V5KVxyXG4gICAgY29uc3QgYW50aHJvcGljID0gYW50aHJvcGljQXBpS2V5ID8gbmV3IEFudGhyb3BpYyh7IGFwaUtleTogYW50aHJvcGljQXBpS2V5IH0pIDogbnVsbFxyXG5cclxuICAgIC8vIENyZWF0ZSBsb2cgZnVuY3Rpb25cclxuICAgIGNvbnN0IGxvZyA9IGFzeW5jIChsZXZlbDogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBhbnksIHByb2R1Y3RJZD86IHN0cmluZykgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2xvZycpLmluc2VydCh7XHJcbiAgICAgICAgICBsZXZlbCxcclxuICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICBjb250ZXh0LFxyXG4gICAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdElkXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBjYXRjaCAobG9nRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9nOicsIGxvZ0Vycm9yKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnNvbGUubG9nKGBbJHtsZXZlbH1dICR7bWVzc2FnZX1gLCBjb250ZXh0KVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IGxvZygnSU5GTycsICdTdGFydGluZyBwcm9kdWN0IGNyZWF0aW9uIHdvcmtmbG93JywgeyBcclxuICAgICAgZmlsZVVybDogYm9keS5maWxlLnB1YmxpY1VybCwgXHJcbiAgICAgIGRlbW9Nb2RlOiBib2R5LmRlbW9Nb2RlIFxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBTdGVwIDE6IFN0b3JlIGltYWdlIHVwbG9hZCByZWNvcmRcclxuICAgIGNvbnN0IHsgZGF0YTogaW1hZ2VVcGxvYWQsIGVycm9yOiB1cGxvYWRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2ltYWdlX3VwbG9hZCcpXHJcbiAgICAgIC5pbnNlcnQoe1xyXG4gICAgICAgIHVybDogYm9keS5maWxlLnB1YmxpY1VybCxcclxuICAgICAgICBmaWxlbmFtZTogYm9keS5maWxlLmZpbGVuYW1lLFxyXG4gICAgICAgIGNvbnRlbnRfdHlwZTogYm9keS5maWxlLmNvbnRlbnRUeXBlLFxyXG4gICAgICAgIHNpemVfYnl0ZXM6IGJvZHkuZmlsZS5zaXplQnl0ZXMsXHJcbiAgICAgICAgdXNlcl9pZDogYm9keS51c2VySWRcclxuICAgICAgfSlcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKVxyXG5cclxuICAgIGlmICh1cGxvYWRFcnJvcikge1xyXG4gICAgICBhd2FpdCBsb2coJ0VSUk9SJywgJ0ZhaWxlZCB0byBzdG9yZSBpbWFnZSB1cGxvYWQnLCB1cGxvYWRFcnJvcilcclxuICAgICAgdGhyb3cgdXBsb2FkRXJyb3JcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBsb2coJ0lORk8nLCAnSW1hZ2UgdXBsb2FkIHN0b3JlZCcsIHsgdXBsb2FkSWQ6IGltYWdlVXBsb2FkLmlkIH0pXHJcblxyXG4gICAgLy8gU3RlcCAyOiBDcmVhdGUgcHJvZHVjdCByZWNvcmRcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvZHVjdCwgZXJyb3I6IHByb2R1Y3RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3QnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBzdGF0dXM6ICdQUk9DRVNTSU5HJyxcclxuICAgICAgICBpbWFnZV91cGxvYWRfaWQ6IGltYWdlVXBsb2FkLmlkLFxyXG4gICAgICAgIHVzZXJfaWQ6IGJvZHkudXNlcklkXHJcbiAgICAgIH0pXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKClcclxuXHJcbiAgICBpZiAocHJvZHVjdEVycm9yKSB7XHJcbiAgICAgIGF3YWl0IGxvZygnRVJST1InLCAnRmFpbGVkIHRvIGNyZWF0ZSBwcm9kdWN0IHJlY29yZCcsIHByb2R1Y3RFcnJvcilcclxuICAgICAgdGhyb3cgcHJvZHVjdEVycm9yXHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgbG9nKCdJTkZPJywgJ1Byb2R1Y3QgcmVjb3JkIGNyZWF0ZWQnLCB7IHByb2R1Y3RJZDogcHJvZHVjdC5pZCB9KVxyXG5cclxuICAgIC8vIFN0ZXAgMzogR2VuZXJhdGUgQUktcG93ZXJlZCBtZXRhZGF0YSAob3B0aW9uYWwgaWYgQW50aHJvcGljIGlzIGNvbmZpZ3VyZWQpXHJcbiAgICBsZXQgbWV0YWRhdGEgPSB7XHJcbiAgICAgIHRpdGxlOiAnQ3VzdG9tIEFydCBQcmludCcsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnSGlnaC1xdWFsaXR5IHBvc3RlciBwcmludCBwZXJmZWN0IGZvciBob21lIG9yIG9mZmljZSBkZWNvcmF0aW9uLiBQcmVtaXVtIHBhcGVyIHdpdGggdmlicmFudCBjb2xvcnMuJ1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhbnRocm9waWMpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBtZXRhZGF0YSA9IGF3YWl0IGdlbmVyYXRlUHJvZHVjdE1ldGFkYXRhKGFudGhyb3BpYywgYm9keS5maWxlLnB1YmxpY1VybClcclxuICAgICAgICBhd2FpdCBsb2coJ0lORk8nLCAnR2VuZXJhdGVkIEFJIG1ldGFkYXRhJywgbWV0YWRhdGEsIHByb2R1Y3QuaWQpXHJcbiAgICAgIH0gY2F0Y2ggKG1ldGFkYXRhRXJyb3IpIHtcclxuICAgICAgICBhd2FpdCBsb2coJ1dBUk4nLCAnRmFpbGVkIHRvIGdlbmVyYXRlIEFJIG1ldGFkYXRhLCB1c2luZyBmYWxsYmFjaycsIG1ldGFkYXRhRXJyb3IsIHByb2R1Y3QuaWQpXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGF3YWl0IGxvZygnSU5GTycsICdVc2luZyBmYWxsYmFjayBtZXRhZGF0YSAoQW50aHJvcGljIG5vdCBjb25maWd1cmVkKScsIHt9LCBwcm9kdWN0LmlkKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0ZXAgNDogRGV0ZXJtaW5lIHdoaWNoIHZhcmlhbnRzIHRvIGNyZWF0ZVxyXG4gICAgY29uc3QgaXNBY3R1YWxseURlbW9Nb2RlID0gYm9keS5kZW1vTW9kZSA9PT0gdHJ1ZSB8fCBwcm9jZXNzLmVudi5ERU1PX01PREUgPT09ICd0cnVlJ1xyXG4gICAgY29uc3QgdmFyaWFudHMgPSBpc0FjdHVhbGx5RGVtb01vZGUgPyBERU1PX1ZBUklBTlRTIDogUFJPRFVDVElPTl9WQVJJQU5UU1xyXG4gICAgXHJcbiAgICBhd2FpdCBsb2coJ0lORk8nLCBgUnVubmluZyBpbiAke2lzQWN0dWFsbHlEZW1vTW9kZSA/ICdERU1PJyA6ICdQUk9EVUNUSU9OJ30gbW9kZWAsIHsgXHJcbiAgICAgIHJlcXVlc3REZW1vTW9kZTogYm9keS5kZW1vTW9kZSwgXHJcbiAgICAgIGVudkRlbW9Nb2RlOiBwcm9jZXNzLmVudi5ERU1PX01PREUsXHJcbiAgICAgIHZhcmlhbnRDb3VudDogdmFyaWFudHMubGVuZ3RoIFxyXG4gICAgfSwgcHJvZHVjdC5pZClcclxuICAgIFxyXG4gICAgLy8gU3RlcCA1OiBDcmVhdGUgcHJvZHVjdCB2YXJpYW50cyBpbiBkYXRhYmFzZVxyXG4gICAgY29uc3QgeyBlcnJvcjogdmFyaWFudEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndmFyaWFudCcpXHJcbiAgICAgIC5pbnNlcnQoXHJcbiAgICAgICAgdmFyaWFudHMubWFwKCh2OiBHZWxhdG9WYXJpYW50KSA9PiAoe1xyXG4gICAgICAgICAgcHJvZHVjdF9pZDogcHJvZHVjdC5pZCxcclxuICAgICAgICAgIHRlbXBsYXRlX3ZhcmlhbnRfaWQ6IHYudGVtcGxhdGVWYXJpYW50SWQsXHJcbiAgICAgICAgICBtYXRlcmlhbDogdi5tYXRlcmlhbCxcclxuICAgICAgICAgIHNpemU6IHYuc2l6ZSxcclxuICAgICAgICAgIGZyYW1lOiB2LmZyYW1lLFxyXG4gICAgICAgICAgc3RhdHVzOiAnUFJPQ0VTU0lORydcclxuICAgICAgICB9KSlcclxuICAgICAgKVxyXG5cclxuICAgIGlmICh2YXJpYW50RXJyb3IpIHtcclxuICAgICAgYXdhaXQgbG9nKCdFUlJPUicsICdGYWlsZWQgdG8gY3JlYXRlIHZhcmlhbnQgcmVjb3JkcycsIHZhcmlhbnRFcnJvciwgcHJvZHVjdC5pZClcclxuICAgICAgdGhyb3cgdmFyaWFudEVycm9yXHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgbG9nKCdJTkZPJywgYENyZWF0ZWQgJHt2YXJpYW50cy5sZW5ndGh9IHZhcmlhbnQgcmVjb3Jkc2AsIHsgY291bnQ6IHZhcmlhbnRzLmxlbmd0aCB9LCBwcm9kdWN0LmlkKVxyXG5cclxuICAgIC8vIFN0ZXAgNjogQ3JlYXRlIHByb2R1Y3QgaW4gR2VsYXRvIChpZiBBUEkga2V5IGlzIGNvbmZpZ3VyZWQgYW5kIG5vdCBpbiBkZW1vIG1vZGUpXHJcbiAgICBsZXQgZ2VsYXRvUHJvZHVjdCA9IG51bGxcclxuICAgIGNvbnN0IGhhc1ZhbGlkR2VsYXRvQ29uZmlnID0gZ2VsYXRvQXBpS2V5ICYmIHByb2Nlc3MuZW52LkdFTEFUT19TVE9SRV9JRCAmJiBwcm9jZXNzLmVudi5HRUxBVE9fU1RPUkVfSUQgIT09ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnXHJcbiAgICBcclxuICAgIGlmIChoYXNWYWxpZEdlbGF0b0NvbmZpZyAmJiAhaXNBY3R1YWxseURlbW9Nb2RlKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgZ2VsYXRvUHJvZHVjdCA9IGF3YWl0IGNyZWF0ZUdlbGF0b1Byb2R1Y3QoYm9keS5maWxlLnB1YmxpY1VybCwgdmFyaWFudHMsIG1ldGFkYXRhKVxyXG4gICAgICAgIGF3YWl0IGxvZygnSU5GTycsICdHZWxhdG8gcHJvZHVjdCBjcmVhdGVkJywgeyBnZWxhdG9JZDogZ2VsYXRvUHJvZHVjdC5pZCB9LCBwcm9kdWN0LmlkKVxyXG4gICAgICB9IGNhdGNoIChnZWxhdG9FcnJvcikge1xyXG4gICAgICAgIGF3YWl0IGxvZygnRVJST1InLCAnR2VsYXRvIHByb2R1Y3QgY3JlYXRpb24gZmFpbGVkJywgZ2VsYXRvRXJyb3IsIHByb2R1Y3QuaWQpXHJcbiAgICAgICAgLy8gRG9uJ3QgdGhyb3cgLSBjb250aW51ZSB3aXRob3V0IEdlbGF0byBpbnRlZ3JhdGlvblxyXG4gICAgICAgIGF3YWl0IGxvZygnV0FSTicsICdDb250aW51aW5nIHdpdGhvdXQgR2VsYXRvIGludGVncmF0aW9uIGR1ZSB0byBBUEkgZXJyb3InLCB7fSwgcHJvZHVjdC5pZClcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcmVhc29ucyA9IFtdXHJcbiAgICAgIGlmICghZ2VsYXRvQXBpS2V5KSByZWFzb25zLnB1c2goJ0FQSSBrZXkgbm90IGNvbmZpZ3VyZWQnKVxyXG4gICAgICBpZiAoIXByb2Nlc3MuZW52LkdFTEFUT19TVE9SRV9JRCB8fCBwcm9jZXNzLmVudi5HRUxBVE9fU1RPUkVfSUQgPT09ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnKSByZWFzb25zLnB1c2goJ3N0b3JlIElEIG5vdCBjb25maWd1cmVkJylcclxuICAgICAgaWYgKGlzQWN0dWFsbHlEZW1vTW9kZSkgcmVhc29ucy5wdXNoKCdkZW1vIG1vZGUgZW5hYmxlZCcpXHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCBsb2coJ0lORk8nLCBgU2tpcHBpbmcgR2VsYXRvIGludGVncmF0aW9uICgke3JlYXNvbnMuam9pbignLCAnKX0pYCwgeyBcclxuICAgICAgICBpc0RlbW86IGlzQWN0dWFsbHlEZW1vTW9kZSxcclxuICAgICAgICBoYXNBcGlLZXk6ICEhZ2VsYXRvQXBpS2V5LFxyXG4gICAgICAgIGhhc1ZhbGlkU3RvcmVJZDogISEocHJvY2Vzcy5lbnYuR0VMQVRPX1NUT1JFX0lEICYmIHByb2Nlc3MuZW52LkdFTEFUT19TVE9SRV9JRCAhPT0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcpXHJcbiAgICAgIH0sIHByb2R1Y3QuaWQpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RlcCA3OiBVcGRhdGUgcHJvZHVjdCB3aXRoIG1ldGFkYXRhIGFuZCBHZWxhdG8gSURcclxuICAgIGNvbnN0IHVwZGF0ZURhdGE6IGFueSA9IHtcclxuICAgICAgdGl0bGU6IG1ldGFkYXRhLnRpdGxlLFxyXG4gICAgICBkZXNjcmlwdGlvbjogbWV0YWRhdGEuZGVzY3JpcHRpb24sXHJcbiAgICAgIHN0YXR1czogZ2VsYXRvUHJvZHVjdCA/ICdQUk9DRVNTSU5HJyA6ICdSRUFEWSdcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZ2VsYXRvUHJvZHVjdCkge1xyXG4gICAgICB1cGRhdGVEYXRhLmdlbGF0b19pZCA9IGdlbGF0b1Byb2R1Y3QuaWRcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Byb2R1Y3QnKVxyXG4gICAgICAudXBkYXRlKHVwZGF0ZURhdGEpXHJcbiAgICAgIC5lcSgnaWQnLCBwcm9kdWN0LmlkKVxyXG5cclxuICAgIGlmICh1cGRhdGVFcnJvcikge1xyXG4gICAgICBhd2FpdCBsb2coJ0VSUk9SJywgJ0ZhaWxlZCB0byB1cGRhdGUgcHJvZHVjdCcsIHVwZGF0ZUVycm9yLCBwcm9kdWN0LmlkKVxyXG4gICAgICB0aHJvdyB1cGRhdGVFcnJvclxyXG4gICAgfVxyXG5cclxuICAgIC8vIFVwZGF0ZSB2YXJpYW50cyB0byBSRUFEWSBpZiBubyBHZWxhdG8gaW50ZWdyYXRpb25cclxuICAgIGlmICghZ2VsYXRvUHJvZHVjdCkge1xyXG4gICAgICBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCd2YXJpYW50JylcclxuICAgICAgICAudXBkYXRlKHsgc3RhdHVzOiAnUkVBRFknIH0pXHJcbiAgICAgICAgLmVxKCdwcm9kdWN0X2lkJywgcHJvZHVjdC5pZClcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBsb2coJ0lORk8nLCAnUHJvZHVjdCBjcmVhdGlvbiBjb21wbGV0ZWQnLCB7IFxyXG4gICAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuaWQsIFxyXG4gICAgICBoYXNHZWxhdG86ICEhZ2VsYXRvUHJvZHVjdCxcclxuICAgICAgbW9kZTogaXNBY3R1YWxseURlbW9Nb2RlID8gJ0RFTU8nIDogJ1BST0RVQ1RJT04nXHJcbiAgICB9LCBwcm9kdWN0LmlkKVxyXG5cclxuICAgIC8vIFJldHVybiByZXNwb25zZSB3aXRoIGNvcnJlY3QgbWVzc2FnaW5nXHJcbiAgICBjb25zdCByZXNwb25zZU1lc3NhZ2UgPSBnZWxhdG9Qcm9kdWN0IFxyXG4gICAgICA/ICdQcm9kdWN0IGNyZWF0aW9uIHN0YXJ0ZWQgd2l0aCBHZWxhdG8gaW50ZWdyYXRpb24uIENoZWNrIHN0YXR1cyBmb3IgdXBkYXRlcy4nXHJcbiAgICAgIDogaXNBY3R1YWxseURlbW9Nb2RlIFxyXG4gICAgICAgID8gJ1Byb2R1Y3QgY3JlYXRlZCBzdWNjZXNzZnVsbHkgaW4gZGVtbyBtb2RlLidcclxuICAgICAgICA6ICdQcm9kdWN0IGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IHdpdGhvdXQgR2VsYXRvIGludGVncmF0aW9uLidcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBwcm9kdWN0SWQ6IHByb2R1Y3QuaWQsXHJcbiAgICAgIGdlbGF0b0lkOiBnZWxhdG9Qcm9kdWN0Py5pZCxcclxuICAgICAgc3RhdHVzOiBnZWxhdG9Qcm9kdWN0ID8gJ1BST0NFU1NJTkcnIDogJ1JFQURZJyxcclxuICAgICAgbW9kZTogaXNBY3R1YWxseURlbW9Nb2RlID8gJ0RFTU8nIDogJ1BST0RVQ1RJT04nLFxyXG4gICAgICBtZXNzYWdlOiByZXNwb25zZU1lc3NhZ2UsXHJcbiAgICAgIG1ldGFkYXRhXHJcbiAgICB9KVxyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignT3JjaGVzdHJhdG9yIEFQSSBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuLy8gQUkgbWV0YWRhdGEgZ2VuZXJhdGlvblxyXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVByb2R1Y3RNZXRhZGF0YShhbnRocm9waWM6IEFudGhyb3BpYywgaW1hZ2VVcmw6IHN0cmluZyk6IFByb21pc2U8eyB0aXRsZTogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nIH0+IHtcclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFudGhyb3BpYy5tZXNzYWdlcy5jcmVhdGUoe1xyXG4gICAgbW9kZWw6ICdjbGF1ZGUtMy1oYWlrdS0yMDI0MDMwNycsXHJcbiAgICBtYXhfdG9rZW5zOiAxMDAwLFxyXG4gICAgdGVtcGVyYXR1cmU6IDAsXHJcbiAgICBtZXNzYWdlczogW3tcclxuICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICBjb250ZW50OiBgR2VuZXJhdGUgcHJvZHVjdCBtZXRhZGF0YSBmb3IgYSBwb3N0ZXIvYXJ0IHByaW50IGJhc2VkIG9uIHRoaXMgaW1hZ2U6ICR7aW1hZ2VVcmx9XHJcblxyXG5SZXR1cm4gYSBKU09OIG9iamVjdCB3aXRoOlxyXG4tIHRpdGxlOiBDb21wZWxsaW5nIHByb2R1Y3QgdGl0bGUgKG1heCA2MCBjaGFycylcclxuLSBkZXNjcmlwdGlvbjogU0VPLW9wdGltaXplZCBkZXNjcmlwdGlvbiAobWF4IDMwMCBjaGFycylcclxuXHJcbkZvY3VzIG9uIGFydGlzdGljIHN0eWxlLCBjb2xvcnMsIG1vb2QsIGFuZCBwb3RlbnRpYWwgdXNlIGNhc2VzLiBNYWtlIGl0IGNvbW1lcmNpYWxseSBhcHBlYWxpbmcuYFxyXG4gICAgfV0sXHJcbiAgICB0b29sczogW3tcclxuICAgICAgbmFtZTogJ2dlbmVyYXRlX21ldGFkYXRhJyxcclxuICAgICAgZGVzY3JpcHRpb246ICdHZW5lcmF0ZSBwcm9kdWN0IG1ldGFkYXRhIGZvciBhcnR3b3JrJyxcclxuICAgICAgaW5wdXRfc2NoZW1hOiB7XHJcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgICAgdGl0bGU6IHsgdHlwZTogJ3N0cmluZycsIG1heExlbmd0aDogNjAgfSxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCBtYXhMZW5ndGg6IDMwMCB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXF1aXJlZDogWyd0aXRsZScsICdkZXNjcmlwdGlvbiddXHJcbiAgICAgIH1cclxuICAgIH1dXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgdG9vbFVzZSA9IHJlc3BvbnNlLmNvbnRlbnQuZmluZChjID0+IGMudHlwZSA9PT0gJ3Rvb2xfdXNlJylcclxuICBpZiAodG9vbFVzZSAmJiB0b29sVXNlLnR5cGUgPT09ICd0b29sX3VzZScpIHtcclxuICAgIGNvbnN0IGlucHV0ID0gdG9vbFVzZS5pbnB1dCBhcyB7IHRpdGxlOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmcgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnQUkgZ2VuZXJhdGVkIG1ldGFkYXRhOicsIGlucHV0KVxyXG4gICAgXHJcbiAgICBjb25zdCByZXN1bHQgPSB7XHJcbiAgICAgIHRpdGxlOiBpbnB1dC50aXRsZSxcclxuICAgICAgZGVzY3JpcHRpb246IGlucHV0LmRlc2NyaXB0aW9uXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdGaW5hbCBtZXRhZGF0YTonLCByZXN1bHQpXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbiAgfVxyXG5cclxuICAvLyBGYWxsYmFjayBtZXRhZGF0YSB3aXRob3V0IHRhZ3NcclxuICBjb25zdCBmYWxsYmFjayA9IHtcclxuICAgIHRpdGxlOiAnQ3VzdG9tIEFydCBQcmludCcsXHJcbiAgICBkZXNjcmlwdGlvbjogJ0hpZ2gtcXVhbGl0eSBwb3N0ZXIgcHJpbnQgcGVyZmVjdCBmb3IgaG9tZSBvciBvZmZpY2UgZGVjb3JhdGlvbi4gUHJlbWl1bSBwYXBlciB3aXRoIHZpYnJhbnQgY29sb3JzLidcclxuICB9XHJcbiAgXHJcbiAgY29uc29sZS5sb2coJ1VzaW5nIGZhbGxiYWNrIG1ldGFkYXRhOicsIGZhbGxiYWNrKVxyXG4gIHJldHVybiBmYWxsYmFja1xyXG59XHJcblxyXG4vLyBHZWxhdG8gQVBJIGludGVncmF0aW9uXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUdlbGF0b1Byb2R1Y3QoaW1hZ2VVcmw6IHN0cmluZywgdmFyaWFudHM6IEdlbGF0b1ZhcmlhbnRbXSwgbWV0YWRhdGE6IGFueSkge1xyXG4gIGNvbnN0IGdlbGF0b0FwaUtleSA9IHByb2Nlc3MuZW52LkdFTEFUT19BUElfS0VZXHJcbiAgY29uc3Qgc3RvcmVJZCA9IHByb2Nlc3MuZW52LkdFTEFUT19TVE9SRV9JRCB8fCAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJ1xyXG4gIFxyXG4gIGlmICghZ2VsYXRvQXBpS2V5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dlbGF0byBBUEkga2V5IG5vdCBjb25maWd1cmVkJylcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgIHRlbXBsYXRlSWQ6IEdFTEFUT19URU1QTEFURV9JRCxcclxuICAgIHRpdGxlOiBtZXRhZGF0YS50aXRsZSxcclxuICAgIGRlc2NyaXB0aW9uOiBtZXRhZGF0YS5kZXNjcmlwdGlvbixcclxuICAgIGltYWdlUGxhY2Vob2xkZXJzOiBbe1xyXG4gICAgICBuYW1lOiAnSW1hZ2VGcm9udCcsXHJcbiAgICAgIGZpbGVVcmw6IGltYWdlVXJsXHJcbiAgICB9XSxcclxuICAgIHZhcmlhbnRzOiB2YXJpYW50cy5tYXAodiA9PiAoe1xyXG4gICAgICB0ZW1wbGF0ZVZhcmlhbnRJZDogdi50ZW1wbGF0ZVZhcmlhbnRJZFxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZygnR2VsYXRvIEFQSSBSZXF1ZXN0OicsIEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpKVxyXG5cclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2Vjb21tZXJjZS5nZWxhdG9hcGlzLmNvbS92MS9zdG9yZXMvJHtzdG9yZUlkfS9wcm9kdWN0czpjcmVhdGUtZnJvbS10ZW1wbGF0ZWAsIHtcclxuICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAnWC1BUEktS0VZJzogZ2VsYXRvQXBpS2V5LFxyXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAnSWRlbXBvdGVuY3ktS2V5JzogY3J5cHRvLnJhbmRvbVVVSUQoKVxyXG4gICAgfSxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpXHJcbiAgfSlcclxuXHJcbiAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXHJcbiAgICBjb25zb2xlLmVycm9yKCdHZWxhdG8gQVBJIEVycm9yIFJlc3BvbnNlOicsIGVycm9yVGV4dClcclxuICAgIHRocm93IG5ldyBFcnJvcihgR2VsYXRvIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7ZXJyb3JUZXh0fWApXHJcbiAgfVxyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICBjb25zb2xlLmxvZygnR2VsYXRvIEFQSSBTdWNjZXNzIFJlc3BvbnNlOicsIEpTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgMikpXHJcbiAgcmV0dXJuIHJlc3VsdFxyXG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVDbGllbnQiLCJBbnRocm9waWMiLCJERU1PX1ZBUklBTlRTIiwidGVtcGxhdGVWYXJpYW50SWQiLCJtYXRlcmlhbCIsInNpemUiLCJmcmFtZSIsIlBST0RVQ1RJT05fVkFSSUFOVFMiLCJHRUxBVE9fVEVNUExBVEVfSUQiLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJqc29uIiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImFudGhyb3BpY0FwaUtleSIsIkFOVEhST1BJQ19BUElfS0VZIiwiZ2VsYXRvQXBpS2V5IiwiR0VMQVRPX0FQSV9LRVkiLCJFcnJvciIsImZpbGUiLCJwdWJsaWNVcmwiLCJzdXBhYmFzZSIsImFudGhyb3BpYyIsImFwaUtleSIsImxvZyIsImxldmVsIiwibWVzc2FnZSIsImNvbnRleHQiLCJwcm9kdWN0SWQiLCJmcm9tIiwiaW5zZXJ0IiwicHJvZHVjdF9pZCIsImxvZ0Vycm9yIiwiY29uc29sZSIsImVycm9yIiwiZmlsZVVybCIsImRlbW9Nb2RlIiwiZGF0YSIsImltYWdlVXBsb2FkIiwidXBsb2FkRXJyb3IiLCJ1cmwiLCJmaWxlbmFtZSIsImNvbnRlbnRfdHlwZSIsImNvbnRlbnRUeXBlIiwic2l6ZV9ieXRlcyIsInNpemVCeXRlcyIsInVzZXJfaWQiLCJ1c2VySWQiLCJzZWxlY3QiLCJzaW5nbGUiLCJ1cGxvYWRJZCIsImlkIiwicHJvZHVjdCIsInByb2R1Y3RFcnJvciIsInN0YXR1cyIsImltYWdlX3VwbG9hZF9pZCIsIm1ldGFkYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImdlbmVyYXRlUHJvZHVjdE1ldGFkYXRhIiwibWV0YWRhdGFFcnJvciIsImlzQWN0dWFsbHlEZW1vTW9kZSIsIkRFTU9fTU9ERSIsInZhcmlhbnRzIiwicmVxdWVzdERlbW9Nb2RlIiwiZW52RGVtb01vZGUiLCJ2YXJpYW50Q291bnQiLCJsZW5ndGgiLCJ2YXJpYW50RXJyb3IiLCJtYXAiLCJ2IiwidGVtcGxhdGVfdmFyaWFudF9pZCIsImNvdW50IiwiZ2VsYXRvUHJvZHVjdCIsImhhc1ZhbGlkR2VsYXRvQ29uZmlnIiwiR0VMQVRPX1NUT1JFX0lEIiwiY3JlYXRlR2VsYXRvUHJvZHVjdCIsImdlbGF0b0lkIiwiZ2VsYXRvRXJyb3IiLCJyZWFzb25zIiwicHVzaCIsImpvaW4iLCJpc0RlbW8iLCJoYXNBcGlLZXkiLCJoYXNWYWxpZFN0b3JlSWQiLCJ1cGRhdGVEYXRhIiwiZ2VsYXRvX2lkIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJlcSIsImhhc0dlbGF0byIsIm1vZGUiLCJyZXNwb25zZU1lc3NhZ2UiLCJzdWNjZXNzIiwiaW1hZ2VVcmwiLCJyZXNwb25zZSIsIm1lc3NhZ2VzIiwiY3JlYXRlIiwibW9kZWwiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJyb2xlIiwiY29udGVudCIsInRvb2xzIiwibmFtZSIsImlucHV0X3NjaGVtYSIsInR5cGUiLCJwcm9wZXJ0aWVzIiwibWF4TGVuZ3RoIiwicmVxdWlyZWQiLCJ0b29sVXNlIiwiZmluZCIsImMiLCJpbnB1dCIsInJlc3VsdCIsImZhbGxiYWNrIiwic3RvcmVJZCIsInBheWxvYWQiLCJ0ZW1wbGF0ZUlkIiwiaW1hZ2VQbGFjZWhvbGRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/orchestrator/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/@anthropic-ai","vendor-chunks/ws","vendor-chunks/whatwg-url","vendor-chunks/tr46","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forchestrator%2Froute&page=%2Fapi%2Forchestrator%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forchestrator%2Froute.ts&appDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cwilli%5Cdev%5CArtifyagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();